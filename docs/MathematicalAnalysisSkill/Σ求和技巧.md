---
title: ∑求和技巧
---





# ∑换序
为什么要研究积分换序,经验告诉我们,有时$\sum\limits_{i } \sum\limits_{j} a_{ij}$如果先对j求和,在对i求和并不好做,但交换顺序后,却显得非常简单


## 引言
我们从求一个n阶矩阵中所有元素和的例子引入

从for循环的角度来看,假设c语言是从1开始的

```c
    int a[n][n]
    int sum=0

   for( i=1;i<=n;i++)
       for( j=1;j<=n;j++)
            sum=sum+a[i][j]
```
计算机程序是取定i=1,然后j从1遍历到n,那么就是按行进行加的

这样一个程序实现的就是 $\sum\limits_{i = 1}^{n} (\sum\limits_{j = 1}^{n} a_{ij})=\sum\limits_{i = 1}^{n} \sum\limits_{j = 1}^{n} a_{ij}$


我们不难发现,如果将i,j互换位置,就是按列相加的,但最终的结果终究是一样的,都是把矩阵中所有元素都加了起来。
也就是说 $\sum\limits_{i = 1}^{n} \sum\limits_{j = 1}^{n} a_{ij}=\sum\limits_{j = 1}^{n} \sum\limits_{i = 1}^{n} a_{ij}$

现在我们可以得到一个类似于二重积分的换序,如果求和的区域是一个矩形区域,那么求和是可以直接交换顺序的。



## 三角形区域的求和换序

例如我们现在要求解一个矩阵的上三角(包括对角线)所有元素的和

那如果按列加
```c
    int a[n][n]
    int sum=0

   for( j=1;j<=n;j++)
       for( i=1;i<=j;i++)
            sum=sum+a[i][j]
```
用求和表示就是$\sum\limits_{j = 1}^{n} \sum\limits_{i = 1}^{j} a_{ij}$

如果按行加,那么会有如下程序
```c
    int a[n][n]
    int sum=0

   for( i=1;i<=n;i++)
       for( j=i;i<=n;j++)
            sum=sum+a[i][j]
```

用求和表示就是$\sum\limits_{i = 1}^{n} \sum\limits_{j = i}^{n} a_{ij}$

那么就有会如下等式

$$
\begin{equation*}
    \sum\limits_{j = 1}^{n} \sum\limits_{i = 1}^{j} a_{ij}=\sum\limits_{i = 1}^{n} \sum\limits_{j = i}^{n} a_{ij}
\end{equation*}
$$

这个式子告诉我们,如果后面一个求和式变量i的上限为前一个给定变量j,那么在交换顺序后,j的下限要变为i,二者的上限都变为n


我们来看一个高中会碰到的数列前n项和

$S_n= \sum\limits_{k = 1}^{n} k 2^k$,现在我们要研究$S_n$,但不太好研究,但他们各自是个等差和等比数列,我们希望把他们分开研究,这里我们就可以利用求和换序,那么这里就一个求和怎么办,没事,我们可以构造一个,注意到$ \sum\limits_{i = 1}^{k} 1=k $

因此
$$
\begin{align*}
    S_n&= \sum\limits_{k = 1}^{n} k 2^k=\sum\limits_{k = 1}^{n} 2^k\sum\limits_{i = 1}^{k} 1\\
    &\text{注意到后一个Σ是对i求和,所以}2^k\text{可以拿到求和号里面}\\
    &=\sum\limits_{k = 1}^{n} \sum\limits_{i = 1}^{k} 2^k\\
    &\text{然后我们进行求和换序}\\
    &=\sum\limits_{i = 1}^{n} \sum\limits_{k = i}^{n} 2^k\\
    &\text{这个时候,右边就是一个等比数列求和}\\
    &=\sum\limits_{i = 1}^{n} \frac{2^i(1-2^{n-i+1})}{1-2}=\sum\limits_{i = 1}^{n} 2^{n+1}-2^i\\
    &=n2^{n+1}-2^{n+1}+2=(n-1)2^{n+1}+2
\end{align*}
$$

## 差分求和
现在我们来考虑这样一个部分和$\sum\limits_{k = 1}^{n}k(a_k-a_{k-1})$,记$S_n=\sum\limits_{k = 1}^{n} a_k$

同样的
$$
\begin{align*}
    &\;\;\;\;\;\;\;\;\;\sum\limits_{k = 1}^{n}k(a_k-a_{k-1})\\
    &=\sum\limits_{k = 1}^{n}\sum\limits_{i = 1}^{k}(a_k-a_{k-1})\\
    &=\sum\limits_{i = 1}^{n}\sum\limits_{k = i}^{n}(a_k-a_{k-1})\\
    &=\sum\limits_{i = 1}^{n}a_n-a_{i}\\
    &=na_n-S_n
\end{align*}
$$
即
$$
\begin{align*}
    \sum\limits_{k = 1}^{n}k(a_k-a_{k-1})=na_n-S_n
\end{align*}
$$
现在假如我们已知级数$\sum\limits_{k = 1}^{\infty} k(a_k-a_{k-1}) $收敛,数列$\{na_n\}$收敛,那么,我们对上面的等式$\sum\limits_{k = 1}^{n}k(a_k-a_{k-1})=na_n-S_n$两边同时取极限,就可以发现$\{S_n\}$收敛,即级数$\sum\limits_{k = 1}^{\infty}a_k $收敛。

## Abel变换的想法：
上面的例子告诉我们,如果一个求和式中,出现了数列$a_n$的差分$a_n-a_{n-1}$的形式,我们可以很好的研究他本身的$a_n$性质。

那么我们自然会问：
对于一个一般的求和$\sum\limits_{k = 1}^{n} a_kb_k$我们是否也能将其改变成$\sum\limits_{k = 1}^{n} (a_k-a_{k-1}) B_k +f(n)$的形式,如果这里的$B_k$有界,$f(n)$的性质的性质又很好,这对我们研究$\sum\limits_{k = 1}^{n} a_kb_k$将起到很好的帮助。


# Abel变换
我们希望$\sum\limits_{k = 1}^{n} a_kb_k$,也写为$\sum\sum$的形式,因此,我们引入一个新数列$\{c_i\}$,使得$b_k=\sum\limits_{i = 1}^{k} c_i$,特别地,约定$b_0=0,a_0=0$,使得$c_0=b_1-b_0$
记$A_k=\sum\limits_{k = 1}^{n} a_k$,$A_0=0$
于是
$$
\begin{align*}
    &\;\;\;\;\;\;\;\;\;\sum\limits_{k = 1}^{n} a_kb_k\\
    &=\sum\limits_{k = 1}^{n} a_k\sum\limits_{i = 1}^{k} c_i\\
    &=\sum\limits_{k = 1}^{n} \sum\limits_{i = 1}^{k} a_kc_i\\
    &=\sum\limits_{i = 1}^{n} \sum\limits_{k = i}^{n} a_kc_i\\
    &=\sum\limits_{i = 1}^{n} c_i\sum\limits_{k = i}^{n} a_k\\
    &=\sum\limits_{i = 1}^{n} c_i(A_n-A_{i-1})\\
    &=A_n\sum\limits_{i = 1}^{n} c_i-\sum\limits_{i = 1}^{n} c_iA_{i-1}\\
    &=A_nb_n-\sum\limits_{i = 1}^{n} (b_i-b_{i-1})A_{i-1}\\
    &=A_nb_n-\sum\limits_{i = 1}^{n} (b_i-b_{i-1})A_{i-1}\\
    &=A_nb_n-\sum\limits_{i = 1}^{n-1} (b_{i+1}-b_{i})A_{i}\\
    &=A_nb_n+\sum\limits_{i = 1}^{n-1} (b_{i}-b_{i+1})A_{i}\\
\end{align*}
$$

即
$$
\begin{align*}
    \sum\limits_{k = 1}^{n} a_kb_k=A_nb_n+\sum\limits_{i = 1}^{n-1} (b_{i}-b_{i+1})A_{i}\\
\end{align*}
$$

这就是著名的$Abel$变换,他将在判断级数敛散性中起到重要的作用
